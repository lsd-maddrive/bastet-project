<launch>
    <arg name='rviz' default="true"/>

    <!-- Start camera -->
    <include file="$(find kitty_vision)/launch/drivers/start_rs_camera.launch" />
    <!-- Start Visual Odom -->
    <node pkg="rtabmap_ros" type="rgbd_odometry" name="rgbd_odometry" output="screen">
        <param name="subscribe_rgbd" type="bool" value="true" />
        <param name="frame_id" type="string" value="rs_camera_link" />
        <param name="publish_tf" type="bool" value="false" />
        <remap from="rgbd_image" to="/rs_camera/rgbd_image" />
        <remap from="odom" to="/kitty/vo" />
    </node>
    <!-- Start UKF -->
    <node pkg="robot_localization" type="ukf_localization_node" name="ukf_localization" clear_params="true" output="screen">
        <rosparam command="load" file="$(find kitty_software)/config/robot_localization/ukf_vo_test.yaml" />
        <remap from="odometry/filtered" to="kitty/odometry/filtered" />
    </node>

    <node if='$(arg rviz)' name ='rviz' type="rviz" pkg = "rviz" args= " -d $(find kitty_software)/config/rviz/test_odometry.rviz"/> 
</launch>